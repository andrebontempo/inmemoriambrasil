<main>
  <div class="custom-box my-2 mx-0">

    <h3 class="section-title text-center">
      <i class="bi bi-pencil-square me-2"></i> Editar História
    </h3>

    <form action="/memorial/{{slug}}/lifestory/update/{{lifeStory._id}}" method="POST" enctype="multipart/form-data">
      <input type="hidden" name="_method" value="PUT" />
      <input type="hidden" name="memorial" value="{{lifeStory.memorial}}" />
      <input type="hidden" name="slug" value="{{slug}}" />

      <div class="card border-0 shadow-sm rounded-4 overflow-hidden mt-4">
        <div class="card-body p-4 p-md-5">

          <!-- Título da História -->
          <div class="mb-4">
            <label for="storyTitle" class="life-label">
              <i class="bi bi-bookmark-fill me-2"></i>Título da História
            </label>
            <input type="text" class="life-input" id="storyTitle" name="title" value="{{lifeStory.title}}" required />
          </div>

          <!-- Conteúdo -->
          <div class="mb-4">
            <label for="storyContent" class="life-label">
              <i class="bi bi-chat-left-text me-2"></i>Conteúdo
            </label>
            <textarea class="life-input" rows="6" id="storyContent" name="content"
              required>{{lifeStory.content}}</textarea>
          </div>

          <!-- Data -->
          <div class="mb-4">
            <label for="eventDate" class="life-label">
              <i class="bi bi-calendar-event me-2"></i>Data do Acontecimento
            </label>
            <input type="date" class="life-input" id="eventDate" name="eventDate" value="{{eventDate}}" />
          </div>

          <!-- Imagem -->
          <div class="mb-4">
            <label for="storyImage" class="life-label">
              <i class="bi bi-image me-2"></i>Substituir imagem
            </label>

            <div class="d-flex align-items-center gap-3">
              {{#if lifeStory.image.url}}
              <div class="flex-shrink-0">
                <img src="{{lifeStory.image.url}}" class="shadow-sm rounded-3" alt="Imagem atual"
                  style="width: 80px; height: 80px; object-fit: cover; border: 2px solid #fff; outline: 1px solid #eee;">
              </div>
              {{/if}}
              <input type="file" class="life-input" id="storyImage" name="file" accept="image/*" />
            </div>
          </div>

          <div class="text-muted mb-4 small text-center">
            <i class="bi bi-info-circle me-1"></i> Você está editando uma história do Caminho Percorrido.
          </div>

          <!-- Botões -->
          <div class="d-flex justify-content-center gap-3">
            <a href="/memorial/{{slug}}/lifestory" class="btn btn-custom-outline btn-sm rounded-pill px-3">
              <i class="bi bi-x-circle me-2"></i>Cancelar
            </a>
            <button type="submit" class="btn btn-custom-outline btn-sm rounded-pill px-3">
              <i class="bi bi-check-circle me-2"></i>Atualizar
            </button>
          </div>

        </div>
      </div>
    </form>

  </div>
</main>