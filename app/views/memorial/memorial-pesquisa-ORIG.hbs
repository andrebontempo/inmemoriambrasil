<div class="container my-5">
  <h2 class="text-center">Resultados da Pesquisa</h2>

  {{#if termo}}
  <p class="text-center">Resultados para: <strong>{{termo}}</strong></p>
  {{/if}}

  {{#if resultados.length}}
  <div class="list-group">

    {{#each resultados}}
    <div class="list-group-item d-flex align-items-center justify-content-between flex-wrap position-relative">

      <!-- ‚≠ê Selo Premium -->
      {{#if (eq this.plan "premium")}}
      <span class="badge bg-warning text-dark position-absolute top-0 end-0 m-2">
        ‚≠ê Premium
      </span>
      {{/if}}

      <!-- Bloco Principal -->
      <div class="d-flex align-items-start w-100">

        <!-- FOTO -->
        <a href="/memorial/{{this.slug}}" class="me-3">
          {{#if this.mainPhoto.url}}
          <img src="{{this.mainPhoto.url}}" alt="Foto de {{this.firstName}}" class="rounded"
            style="width: 110px; height: 110px; object-fit: cover; border: 2px solid #4f0e21;" />
          {{else}}
          <img src="/images/default-profile.png" alt="Sem foto" class="rounded"
            style="width: 110px; height: 110px; object-fit: cover; border: 2px solid #ccc;" />
          {{/if}}
        </a>

        <!-- INFORMA√á√ïES -->
        <div class="flex-grow-1">

          <h5 class="mb-2">
            {{this.firstName}} {{this.lastName}}
          </h5>

          <p class="mb-2 small">
            <strong>Nascimento:</strong>
            {{formatDate this.birth.date}}
            <br />
            <strong>Falecimento:</strong>
            {{formatDate this.death.date}}
          </p>

          <!-- LINHA √öNICA -->
          <div class="d-flex flex-wrap align-items-center gap-3 small">

            <!-- üë§ Criador -->
            <div>
              <strong>Criado por:</strong>
              {{#if this.owner}}
              {{this.owner.firstName}} {{this.owner.lastName}}
              {{else}}
              ‚Äî
              {{/if}}
            </div>

            <!-- üîê Visibilidade -->
            <div>
              <strong>Visibilidade:</strong>

              {{#if (eq this.accessLevel "public_read")}}
              <span class="badge bg-success">P√∫blico</span>
              {{/if}}

              {{#if (eq this.accessLevel "private_read")}}
              <span class="badge bg-secondary">Privado (leitura)</span>
              {{/if}}

              {{#if (eq this.accessLevel "private_edit")}}
              <span class="badge bg-dark">Privado (edi√ß√£o)</span>
              {{/if}}
            </div>

            <!-- üíé Plano -->
            <div>
              <strong>Plano:</strong>

              {{#if (eq this.plan "premium")}}
              <span class="badge bg-warning text-dark">Premium</span>
              {{else}}
              <span class="badge bg-light text-dark border">Free</span>
              {{/if}}
            </div>

          </div>

        </div>

        <!-- BOT√ÉO -->
        <div class="ms-auto mt-3 mt-md-0">
          <a href="/memorial/{{this.slug}}" class="btn btn-primary">
            Visitar
          </a>
        </div>

      </div>

    </div>
    {{/each}}

  </div>

  <!-- üî¢ PAGINA√á√ÉO -->
  {{#if totalPages}}
  <nav class="mt-4">
    <ul class="pagination justify-content-center">

      <!-- Anterior -->
      {{#if hasPrev}}
      <li class="page-item">
        <a class="page-link" href="?q={{termo}}&page={{prevPage}}">
          Anterior
        </a>
      </li>
      {{else}}
      <li class="page-item disabled">
        <span class="page-link">Anterior</span>
      </li>
      {{/if}}

      <!-- P√°gina Atual -->
      <li class="page-item active">
        <span class="page-link">
          P√°gina {{currentPage}} de {{totalPages}}
        </span>
      </li>

      <!-- Pr√≥xima -->
      {{#if hasNext}}
      <li class="page-item">
        <a class="page-link" href="?q={{termo}}&page={{nextPage}}">
          Pr√≥xima
        </a>
      </li>
      {{else}}
      <li class="page-item disabled">
        <span class="page-link">Pr√≥xima</span>
      </li>
      {{/if}}

    </ul>
  </nav>
  {{/if}}

  {{else}}
  <p class="text-center text-muted">Nenhum memorial encontrado.</p>
  {{/if}}

</div>